# PRD

## ドキュメント情報

- オーナー: Team Production
- ステータス: 更新中（最終更新: 2025-02-17）
- 対象: モバイル（Expo）/ Web（Next.js）/ Go API

## Overview / Problem

近所に新しくできた小規模店舗は情報が少なく、写真や体験談が見えづらい。結果として「雰囲気がわからないので行きづらい」「開店したことに気づかない」まま機会損失が生まれている。ユーザーは“次に行けるお店”を素早く決めたい一方、店舗側は初期露出とポジティブな口コミを増やしたい。

## Goals

- 新規/近隣店舗を写真と基礎情報付きで素早く見つけられること
- 営業中か・開店日・距離・カテゴリを起点にした探索を提供すること
- 店舗オーナーが最低限の情報（場所・写真・メニュー）を登録し、承認後に公開できること

## Non-Goals（今回スコープ外）

- 予約/決済/クーポン配信などのトランザクション機能
- 実店舗の混雑度リアルタイム表示や高度なレコメンド
- 動画アップロードや大規模 UGC モデレーション機構

## Primary Users

- 探索ユーザー（学生/社会人）: 週末や仕事帰りに新しい店を開拓したい。雰囲気・距離・価格帯を素早く把握したい。
- 店舗オーナー: 開店直後に写真付きで情報を載せ、承認後に公開したい。将来的にレビュー/通報対応も視野。

## Solution & 現状実装

- フロント
  - モバイル（Expo Router）: タブ構成（ホーム/検索/お気に入り/マイページ）。タグ・カテゴリ・距離/評価ソート、訪問済みフラグ、お気に入り、共有リンク UI、Supabase OAuth ログイン、オーナー用メール/パスワードログイン UI。
  - Web（Next.js）: カテゴリ/キーワード検索、タグクリックでのクイックフィルタ、カード一覧と詳細ページ。すべて `@team/shop-core` のダミーデータで動作。
- バックエンド（Go/Echo）
  - Supabase Admin API 経由のサインアップ/ログイン、JWT 検証ミドルウェア、RBAC。
  - 店舗/メニュー/レビュー CRUD、ユーザー情報更新、お気に入り、通報、管理者承認/差し戻し、Storage 用の署名付き URL 発行。
  - Postgres + GORM モデル。初期マイグレーションは `migrations/000001_init.up.sql`。

## Success Criteria（暫定）

- 探索体験: カテゴリ/タグ/距離ソートでの検索完了まで 3 タップ以内。
- データ: 主要メトリクスとして「お気に入り登録数」「訪問済みフラグ」「オーナーによる店舗登録件数」を計測できる状態。

## Open Questions / Risks

- 実データ移行時にダミー構造（`@team/shop-core`）と API/DB をどう同期させるか。
- Supabase の無料枠を超える際のレート制限・メール送信制約。
- 通報やレビュー承認フローの運用ルール（自動/手動判断）。
