CREATE EXTENSION IF NOT EXISTS postgis;

DROP TABLE IF EXISTS stations;

CREATE TABLE stations (
  id   BIGSERIAL PRIMARY KEY,      -- 連番ID
  name TEXT NOT NULL,              -- 駅名
  kana TEXT NOT NULL,
  kind TEXT NOT NULL,              -- 区分け（三宮・元町 / 須磨 など）
  lat  DOUBLE PRECISION NULL,
  lng  DOUBLE PRECISION NULL,

  -- 検索用：緯度経度から自動生成される地理(Point)
  geog geography(Point, 4326)
    GENERATED ALWAYS AS (
      CASE
        WHEN lat IS NULL OR lng IS NULL THEN NULL
        ELSE ST_SetSRID(ST_MakePoint(lng, lat), 4326)::geography
      END
    ) STORED
);

CREATE INDEX stations_kind_idx ON stations (kind);

CREATE INDEX stations_geog_gist_idx ON stations USING GIST (geog);

INSERT INTO stations (name, kana, kind, lat, lng) VALUES
-- 三宮・元町（周辺〜東側含む）
('三ノ宮駅(ＪＲ)','さんのみや','三宮・元町',34.694839,135.194942),
('三宮駅〔ポートライナー〕','さんのみや','三宮・元町',34.694508,135.195250),
('神戸三宮駅〔阪急線〕', 'こうべさんのみや','三宮・元町',34.693169,135.192881),
('神戸三宮駅〔阪神線〕','こうべさんのみや','三宮・元町',34.693172,135.195550),
('三宮駅〔地下鉄西神・山手線〕','さんのみや','三宮・元町',34.694583,135.193753),
('三宮・花時計前駅','さんのみや・はなどけいまえ','三宮・元町',34.691581,135.195550),
('新神戸駅','しんこうべ','三宮・元町',34.706722,135.196222),
('旧居留地・大丸前駅','きゅうきょりゅうち・だいまるまえ','三宮・元町',34.689575,135.190675),
('元町駅〔ＪＲ〕','もとまち','三宮・元町',34.689567,135.187372),
('元町駅〔阪神線〕','もとまち','三宮・元町',34.689450,135.187061),
('県庁前駅','けんちょうまえ','三宮・元町',34.690914,135.183858),
('貿易センター駅','ぼうえきせんたー','三宮・元町',34.689394,135.199456),
('春日野道駅(阪急線)','かすがのみち','三宮・元町',34.703025,135.205375),
('春日野道駅(阪神線)','かすがのみち','三宮・元町',34.703022,135.205283),
('王子公園駅','おうじこうえん','三宮・元町',34.710167,135.218375),
('灘駅','なだ','三宮・元町',34.706200,135.216500),
('西灘駅','にしなだ','三宮・元町',34.705928,135.224803),
('岩屋駅','いわや','三宮・元町',34.704081,135.217839),
('摩耶駅','まや','三宮・元町',34.708667,135.225167),
('新在家駅','しんざいけ','三宮・元町',34.710661,135.240683),
('大石駅','おおいし','三宮・元町',34.707772,135.230992),
('六甲道駅','ろっこうみち','三宮・元町',34.714989,135.238508),
('六甲駅','ろっこう','三宮・元町',34.719850,135.234389),
('住吉駅(東海道本線)','すみよし','三宮・元町',34.719572,135.261856),
('住吉駅(神戸新交通線)','すみよし','三宮・元町',34.719483,135.262314),
('住吉駅(阪神線)','すみよし','三宮・元町',34.712917,135.261667),
('御影駅(阪急線)','みかげ','三宮・元町',34.724753,135.252514),
('御影駅(阪神線)','みかげ','三宮・元町',34.714839,135.255625),
('石屋川駅','いしやがわ','三宮・元町',34.713403,135.249694),
('魚崎駅','うおざき','三宮・元町',34.712586,135.269258),
('南魚崎駅','みなみうおざき','三宮・元町',34.706806,135.267694),
('青木駅','おおぎ','三宮・元町',34.717111,135.280622),
('深江駅','ふかえ','三宮・元町',34.722722,135.291311),
('甲南山手駅','こうなんやまて','三宮・元町',34.730583,135.292425),
('摂津本山駅','せっつもとやま','三宮・元町',34.726681,135.276450),
('岡本駅','おかもと','三宮・元町',34.729106,135.275731),
('医療センター駅','いりょうせんたー','三宮・元町',34.658608,135.216367),
('計算科学センター駅','けいさんかがくせんたー','三宮・元町',34.654844,135.221728),
('市民広場駅','しみんひろば','三宮・元町',34.664900,135.212461),
('ポートターミナル駅','ぽーとたーみなる','三宮・元町',34.681386,135.202303),
('中公園駅','なかこうえん','三宮・元町',34.673250,135.207394),
('南公園駅','みなみこうえん','三宮・元町',34.664628,135.216972),
('中埠頭駅','なかふとう','三宮・元町',34.669433,135.217167),
('北埠頭駅','きたふとう','三宮・元町',34.673569,135.214669),
('マリンパーク駅','まりんぱーく','三宮・元町',34.684250,135.270111),
('みなとじま駅','みなとじま','三宮・元町',34.669067,135.209994),
('アイランド北口駅','あいらんどきたぐち','三宮・元町',34.693333,135.268667),
('アイランドセンター駅','あいらんどせんたー','三宮・元町',34.689167,135.269306),
('神戸空港駅','こうべくうこう','三宮・元町',34.637194,135.228953),

-- 神戸・新開地（神戸駅〜兵庫/長田）
('神戸駅','こうべ','神戸・新開地',34.679528,135.178025),
('高速神戸駅','こうそくこうべ','神戸・新開地',34.679361,135.174439),
('新開地駅','しんかいち','神戸・新開地',34.675981,135.169289),
('ハーバーランド駅','はーばーらんど','神戸・新開地',34.678536,135.178711),
('花隈駅','はなくま','神戸・新開地',34.686117,135.181528),
('西元町駅','にしもとまち','神戸・新開地',34.683900,135.179589),
('みなと元町駅','みなともとまち','神戸・新開地',34.685875,135.183972),
('大倉山駅','おおくらやま','神戸・新開地',34.684614,135.174525),
('中央市場前駅','ちゅうおういちばまえ','神戸・新開地',34.666197,135.175864),
('兵庫駅','ひょうご','神戸・新開地',34.668000,135.164536),
('大開駅','だいかい','神戸・新開地',34.671178,135.161708),
('長田駅(神戸市営)','ながた','神戸・新開地',34.668492,135.151508),
('長田駅(神戸電鉄線)','ながた','神戸・新開地',34.681703,135.149539),
('高速長田駅','こうそくながた','神戸・新開地',34.667253,135.151550),
('西代駅','にしだい','神戸・新開地',34.662222,135.143889),
('新長田駅','しんながた','神戸・新開地',34.657572,135.145122),
('駒ケ林駅','こまがばやし','神戸・新開地',34.652106,135.149553),
('苅藻駅','かるも','神戸・新開地',34.653650,135.156597),
('御崎公園駅','みさきこうえん','神戸・新開地',34.654642,135.165000),
('和田岬駅','わだみさき','神戸・新開地',34.656878,135.174686),
('湊川駅','みなとがわ','神戸・新開地',34.679272,135.166314),
('湊川公園駅','みなとがわこうえん','神戸・新開地',34.679361,135.167217),
('上沢駅','かみさわ','神戸・新開地',34.673250,135.158331),
('丸山駅','まるやま','神戸・新開地',34.685817,135.143992),

-- 須磨（西側：須磨〜垂水・舞子までまとめて）
('板宿駅','いたやど','須磨',34.660058,135.133403),
('須磨駅','すま','須磨',34.642272,135.112892),
('東須磨駅','ひがしすま','須磨',34.655136,135.127531),
('須磨海浜公園駅','すまかいひんこうえん','須磨',34.647192,135.126622),
('須磨寺駅','すまでら','須磨',34.646444,135.116242),
('須磨浦公園駅','すまうらこうえん','須磨',34.637778,135.100278),
('山陽須磨駅','さんようすま','須磨',34.643422,135.112064),
('月見山駅','つきみやま','須磨',34.649836,135.121578),
('山陽塩屋駅','さんようしおや','須磨',34.633692,135.082528),
('塩屋駅','しおや','須磨',34.633600,135.083372),
('滝の茶屋駅','たきのちゃや','須磨',34.630917,135.072047),
('垂水駅','たるみ','須磨',34.629528,135.053628),
('山陽垂水駅','さんようたるみ','須磨',34.629528,135.053822),
('東垂水駅','ひがしたるみ','須磨',34.629175,135.062928),
('舞子駅','まいこ','須磨',34.633483,135.033772),
('舞子公園駅','まいここうえん','須磨',34.634108,135.034303),
('西舞子駅','にしまいこ','須磨',34.638489,135.028283),
('霞ケ丘駅','かすみがおか','須磨',34.630831,135.042344),
('鷹取駅','たかとり','須磨',34.651339,135.135203),

-- 北区（田舎）
('藍那駅','あいな','北区(田舎)',34.732453,135.117981),
('有馬温泉駅','ありまおんせん','北区(田舎)',34.799322,135.245969),
('有馬口駅','ありまぐち','北区(田舎)',34.796742,135.220950),
('大池駅','おおいけ','北区(田舎)',34.780686,135.198386),
('岡場駅','おかば','北区(田舎)',34.821517,135.222383),
('唐櫃台駅','からとだい','北区(田舎)',34.790661,135.211697),
('北鈴蘭台駅','きたすずらんだい','北区(田舎)',34.739467,135.152028),
('木幡駅','こばた','北区(田舎)',34.748419,135.071047),
('五社駅','ごしゃ','北区(田舎)',34.806097,135.216225),
('神鉄道場駅','しんてつどうじょう','北区(田舎)',34.866647,135.226103),
('鈴蘭台駅','すずらんだい','北区(田舎)',34.723661,135.146058),
('鈴蘭台西口駅','すずらんだいにしぐち','北区(田舎)',34.726422,135.140711),
('田尾寺駅','たおじ','北区(田舎)',34.835469,135.225994),
('谷上駅','たにがみ','北区(田舎)',34.761831,135.171344),
('道場駅','どうじょう','北区(田舎)',34.867228,135.255628),
('道場南口駅','どうじょうみなみぐち','北区(田舎)',34.856275,135.223008),
('西鈴蘭台駅','にしすずらんだい','北区(田舎)',34.725694,135.135394),
('二郎駅','にろう','北区(田舎)',34.848992,135.226958),
('箕谷駅','みのたに','北区(田舎)',34.756911,135.155767),
('山の街駅','やまのまち','北区(田舎)',34.746650,135.152914),
('花山駅','はなやま','北区(田舎)',34.769533,135.186878),
('鵯越駅','ひよどりごえ','北区(田舎)',34.692639,135.142128),
('神鉄六甲駅','しんてつろっこう','北区(田舎)',34.785553,135.206639),

-- 西神（西区）
('伊川谷駅','いかわだに','西神(西区)',34.687886,135.041364),
('学園都市駅','がくえんとし','西神(西区)',34.681494,135.057486),
('押部谷駅','おしべだに','西神(西区)',34.756606,135.039183),
('木津駅','きづ','西神(西区)',34.744178,135.088200),
('栄駅','さかえ','西神(西区)',34.755206,135.056639),
('西神中央駅','せいしんちゅうおう','西神(西区)',34.719469,135.017447),
('西神南駅','せいしんみなみ','西神(西区)',34.699405,135.030183),
('総合運動公園駅','そうごううんどうこうえん','西神(西区)',34.681703,135.075783),
('名谷駅','みょうだに','西神(西区)',34.679328,135.094211),
('妙法寺駅','みょうほうじ','西神(西区)',34.675044,135.110119);
