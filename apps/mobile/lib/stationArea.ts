export type StationArea = {
  name: string;
  kana: string;
  area: string;
  latitude: number;
  longitude: number;
};

export const STATION_AREAS: StationArea[] = [
  {
    name: '三ノ宮駅(ＪＲ)',
    kana: 'さんのみや',
    area: '三宮・元町',
    latitude: 34.694839,
    longitude: 135.194942,
  },
  {
    name: '三宮駅〔ポートライナー〕',
    kana: 'さんのみや',
    area: '三宮・元町',
    latitude: 34.694508,
    longitude: 135.19525,
  },
  {
    name: '神戸三宮駅〔阪急線〕',
    kana: 'こうべさんのみや',
    area: '三宮・元町',
    latitude: 34.693169,
    longitude: 135.192881,
  },
  {
    name: '神戸三宮駅〔阪神線〕',
    kana: 'こうべさんのみや',
    area: '三宮・元町',
    latitude: 34.693172,
    longitude: 135.19555,
  },
  {
    name: '三宮駅〔地下鉄西神・山手線〕',
    kana: 'さんのみや',
    area: '三宮・元町',
    latitude: 34.694583,
    longitude: 135.193753,
  },
  {
    name: '三宮・花時計前駅',
    kana: 'さんのみや・はなどけいまえ',
    area: '三宮・元町',
    latitude: 34.691581,
    longitude: 135.19555,
  },
  {
    name: '新神戸駅',
    kana: 'しんこうべ',
    area: '三宮・元町',
    latitude: 34.706722,
    longitude: 135.196222,
  },
  {
    name: '旧居留地・大丸前駅',
    kana: 'きゅうきょりゅうち・だいまるまえ',
    area: '三宮・元町',
    latitude: 34.689575,
    longitude: 135.190675,
  },
  {
    name: '元町駅〔ＪＲ〕',
    kana: 'もとまち',
    area: '三宮・元町',
    latitude: 34.689567,
    longitude: 135.187372,
  },
  {
    name: '元町駅〔阪神線〕',
    kana: 'もとまち',
    area: '三宮・元町',
    latitude: 34.68945,
    longitude: 135.187061,
  },
  {
    name: '県庁前駅',
    kana: 'けんちょうまえ',
    area: '三宮・元町',
    latitude: 34.690914,
    longitude: 135.183858,
  },
  {
    name: '貿易センター駅',
    kana: 'ぼうえきせんたー',
    area: '三宮・元町',
    latitude: 34.689394,
    longitude: 135.199456,
  },
  {
    name: '春日野道駅(阪急線)',
    kana: 'かすがのみち',
    area: '三宮・元町',
    latitude: 34.703025,
    longitude: 135.205375,
  },
  {
    name: '春日野道駅(阪神線)',
    kana: 'かすがのみち',
    area: '三宮・元町',
    latitude: 34.703022,
    longitude: 135.205283,
  },
  {
    name: '王子公園駅',
    kana: 'おうじこうえん',
    area: '三宮・元町',
    latitude: 34.710167,
    longitude: 135.218375,
  },
  {
    name: '灘駅',
    kana: 'なだ',
    area: '三宮・元町',
    latitude: 34.7062,
    longitude: 135.2165,
  },
  {
    name: '西灘駅',
    kana: 'にしなだ',
    area: '三宮・元町',
    latitude: 34.705928,
    longitude: 135.224803,
  },
  {
    name: '岩屋駅',
    kana: 'いわや',
    area: '三宮・元町',
    latitude: 34.704081,
    longitude: 135.217839,
  },
  {
    name: '摩耶駅',
    kana: 'まや',
    area: '三宮・元町',
    latitude: 34.708667,
    longitude: 135.225167,
  },
  {
    name: '新在家駅',
    kana: 'しんざいけ',
    area: '三宮・元町',
    latitude: 34.710661,
    longitude: 135.240683,
  },
  {
    name: '大石駅',
    kana: 'おおいし',
    area: '三宮・元町',
    latitude: 34.707772,
    longitude: 135.230992,
  },
  {
    name: '六甲道駅',
    kana: 'ろっこうみち',
    area: '三宮・元町',
    latitude: 34.714989,
    longitude: 135.238508,
  },
  {
    name: '六甲駅',
    kana: 'ろっこう',
    area: '三宮・元町',
    latitude: 34.71985,
    longitude: 135.234389,
  },
  {
    name: '住吉駅(東海道本線)',
    kana: 'すみよし',
    area: '三宮・元町',
    latitude: 34.719572,
    longitude: 135.261856,
  },
  {
    name: '住吉駅(神戸新交通線)',
    kana: 'すみよし',
    area: '三宮・元町',
    latitude: 34.719483,
    longitude: 135.262314,
  },
  {
    name: '住吉駅(阪神線)',
    kana: 'すみよし',
    area: '三宮・元町',
    latitude: 34.712917,
    longitude: 135.261667,
  },
  {
    name: '御影駅(阪急線)',
    kana: 'みかげ',
    area: '三宮・元町',
    latitude: 34.724753,
    longitude: 135.252514,
  },
  {
    name: '御影駅(阪神線)',
    kana: 'みかげ',
    area: '三宮・元町',
    latitude: 34.714839,
    longitude: 135.255625,
  },
  {
    name: '石屋川駅',
    kana: 'いしやがわ',
    area: '三宮・元町',
    latitude: 34.713403,
    longitude: 135.249694,
  },
  {
    name: '魚崎駅',
    kana: 'うおざき',
    area: '三宮・元町',
    latitude: 34.712586,
    longitude: 135.269258,
  },
  {
    name: '南魚崎駅',
    kana: 'みなみうおざき',
    area: '三宮・元町',
    latitude: 34.706806,
    longitude: 135.267694,
  },
  {
    name: '青木駅',
    kana: 'おおぎ',
    area: '三宮・元町',
    latitude: 34.717111,
    longitude: 135.280622,
  },
  {
    name: '深江駅',
    kana: 'ふかえ',
    area: '三宮・元町',
    latitude: 34.722722,
    longitude: 135.291311,
  },
  {
    name: '甲南山手駅',
    kana: 'こうなんやまて',
    area: '三宮・元町',
    latitude: 34.730583,
    longitude: 135.292425,
  },
  {
    name: '摂津本山駅',
    kana: 'せっつもとやま',
    area: '三宮・元町',
    latitude: 34.726681,
    longitude: 135.27645,
  },
  {
    name: '岡本駅',
    kana: 'おかもと',
    area: '三宮・元町',
    latitude: 34.729106,
    longitude: 135.275731,
  },
  {
    name: '医療センター駅',
    kana: 'いりょうせんたー',
    area: '三宮・元町',
    latitude: 34.658608,
    longitude: 135.216367,
  },
  {
    name: '計算科学センター駅',
    kana: 'けいさんかがくせんたー',
    area: '三宮・元町',
    latitude: 34.654844,
    longitude: 135.221728,
  },
  {
    name: '市民広場駅',
    kana: 'しみんひろば',
    area: '三宮・元町',
    latitude: 34.6649,
    longitude: 135.212461,
  },
  {
    name: 'ポートターミナル駅',
    kana: 'ぽーとたーみなる',
    area: '三宮・元町',
    latitude: 34.681386,
    longitude: 135.202303,
  },
  {
    name: '中公園駅',
    kana: 'なかこうえん',
    area: '三宮・元町',
    latitude: 34.67325,
    longitude: 135.207394,
  },
  {
    name: '南公園駅',
    kana: 'みなみこうえん',
    area: '三宮・元町',
    latitude: 34.664628,
    longitude: 135.216972,
  },
  {
    name: '中埠頭駅',
    kana: 'なかふとう',
    area: '三宮・元町',
    latitude: 34.669433,
    longitude: 135.217167,
  },
  {
    name: '北埠頭駅',
    kana: 'きたふとう',
    area: '三宮・元町',
    latitude: 34.673569,
    longitude: 135.214669,
  },
  {
    name: 'マリンパーク駅',
    kana: 'まりんぱーく',
    area: '三宮・元町',
    latitude: 34.68425,
    longitude: 135.270111,
  },
  {
    name: 'みなとじま駅',
    kana: 'みなとじま',
    area: '三宮・元町',
    latitude: 34.669067,
    longitude: 135.209994,
  },
  {
    name: 'アイランド北口駅',
    kana: 'あいらんどきたぐち',
    area: '三宮・元町',
    latitude: 34.693333,
    longitude: 135.268667,
  },
  {
    name: 'アイランドセンター駅',
    kana: 'あいらんどせんたー',
    area: '三宮・元町',
    latitude: 34.689167,
    longitude: 135.269306,
  },
  {
    name: '神戸空港駅',
    kana: 'こうべくうこう',
    area: '三宮・元町',
    latitude: 34.637194,
    longitude: 135.228953,
  },
  {
    name: '神戸駅',
    kana: 'こうべ',
    area: '神戸・新開地',
    latitude: 34.679528,
    longitude: 135.178025,
  },
  {
    name: '高速神戸駅',
    kana: 'こうそくこうべ',
    area: '神戸・新開地',
    latitude: 34.679361,
    longitude: 135.174439,
  },
  {
    name: '新開地駅',
    kana: 'しんかいち',
    area: '神戸・新開地',
    latitude: 34.675981,
    longitude: 135.169289,
  },
  {
    name: 'ハーバーランド駅',
    kana: 'はーばーらんど',
    area: '神戸・新開地',
    latitude: 34.678536,
    longitude: 135.178711,
  },
  {
    name: '花隈駅',
    kana: 'はなくま',
    area: '神戸・新開地',
    latitude: 34.686117,
    longitude: 135.181528,
  },
  {
    name: '西元町駅',
    kana: 'にしもとまち',
    area: '神戸・新開地',
    latitude: 34.6839,
    longitude: 135.179589,
  },
  {
    name: 'みなと元町駅',
    kana: 'みなともとまち',
    area: '神戸・新開地',
    latitude: 34.685875,
    longitude: 135.183972,
  },
  {
    name: '大倉山駅',
    kana: 'おおくらやま',
    area: '神戸・新開地',
    latitude: 34.684614,
    longitude: 135.174525,
  },
  {
    name: '中央市場前駅',
    kana: 'ちゅうおういちばまえ',
    area: '神戸・新開地',
    latitude: 34.666197,
    longitude: 135.175864,
  },
  {
    name: '兵庫駅',
    kana: 'ひょうご',
    area: '神戸・新開地',
    latitude: 34.668,
    longitude: 135.164536,
  },
  {
    name: '大開駅',
    kana: 'だいかい',
    area: '神戸・新開地',
    latitude: 34.671178,
    longitude: 135.161708,
  },
  {
    name: '長田駅(神戸市営)',
    kana: 'ながた',
    area: '神戸・新開地',
    latitude: 34.668492,
    longitude: 135.151508,
  },
  {
    name: '長田駅(神戸電鉄線)',
    kana: 'ながた',
    area: '神戸・新開地',
    latitude: 34.681703,
    longitude: 135.149539,
  },
  {
    name: '高速長田駅',
    kana: 'こうそくながた',
    area: '神戸・新開地',
    latitude: 34.667253,
    longitude: 135.15155,
  },
  {
    name: '西代駅',
    kana: 'にしだい',
    area: '神戸・新開地',
    latitude: 34.662222,
    longitude: 135.143889,
  },
  {
    name: '新長田駅',
    kana: 'しんながた',
    area: '神戸・新開地',
    latitude: 34.657572,
    longitude: 135.145122,
  },
  {
    name: '駒ケ林駅',
    kana: 'こまがばやし',
    area: '神戸・新開地',
    latitude: 34.652106,
    longitude: 135.149553,
  },
  {
    name: '苅藻駅',
    kana: 'かるも',
    area: '神戸・新開地',
    latitude: 34.65365,
    longitude: 135.156597,
  },
  {
    name: '御崎公園駅',
    kana: 'みさきこうえん',
    area: '神戸・新開地',
    latitude: 34.654642,
    longitude: 135.165,
  },
  {
    name: '和田岬駅',
    kana: 'わだみさき',
    area: '神戸・新開地',
    latitude: 34.656878,
    longitude: 135.174686,
  },
  {
    name: '湊川駅',
    kana: 'みなとがわ',
    area: '神戸・新開地',
    latitude: 34.679272,
    longitude: 135.166314,
  },
  {
    name: '湊川公園駅',
    kana: 'みなとがわこうえん',
    area: '神戸・新開地',
    latitude: 34.679361,
    longitude: 135.167217,
  },
  {
    name: '上沢駅',
    kana: 'かみさわ',
    area: '神戸・新開地',
    latitude: 34.67325,
    longitude: 135.158331,
  },
  {
    name: '丸山駅',
    kana: 'まるやま',
    area: '神戸・新開地',
    latitude: 34.685817,
    longitude: 135.143992,
  },
  {
    name: '板宿駅',
    kana: 'いたやど',
    area: '須磨',
    latitude: 34.660058,
    longitude: 135.133403,
  },
  {
    name: '須磨駅',
    kana: 'すま',
    area: '須磨',
    latitude: 34.642272,
    longitude: 135.112892,
  },
  {
    name: '東須磨駅',
    kana: 'ひがしすま',
    area: '須磨',
    latitude: 34.655136,
    longitude: 135.127531,
  },
  {
    name: '須磨海浜公園駅',
    kana: 'すまかいひんこうえん',
    area: '須磨',
    latitude: 34.647192,
    longitude: 135.126622,
  },
  {
    name: '須磨寺駅',
    kana: 'すまでら',
    area: '須磨',
    latitude: 34.646444,
    longitude: 135.116242,
  },
  {
    name: '須磨浦公園駅',
    kana: 'すまうらこうえん',
    area: '須磨',
    latitude: 34.637778,
    longitude: 135.100278,
  },
  {
    name: '山陽須磨駅',
    kana: 'さんようすま',
    area: '須磨',
    latitude: 34.643422,
    longitude: 135.112064,
  },
  {
    name: '月見山駅',
    kana: 'つきみやま',
    area: '須磨',
    latitude: 34.649836,
    longitude: 135.121578,
  },
  {
    name: '山陽塩屋駅',
    kana: 'さんようしおや',
    area: '須磨',
    latitude: 34.633692,
    longitude: 135.082528,
  },
  {
    name: '塩屋駅',
    kana: 'しおや',
    area: '須磨',
    latitude: 34.6336,
    longitude: 135.083372,
  },
  {
    name: '滝の茶屋駅',
    kana: 'たきのちゃや',
    area: '須磨',
    latitude: 34.630917,
    longitude: 135.072047,
  },
  {
    name: '垂水駅',
    kana: 'たるみ',
    area: '須磨',
    latitude: 34.629528,
    longitude: 135.053628,
  },
  {
    name: '山陽垂水駅',
    kana: 'さんようたるみ',
    area: '須磨',
    latitude: 34.629528,
    longitude: 135.053822,
  },
  {
    name: '東垂水駅',
    kana: 'ひがしたるみ',
    area: '須磨',
    latitude: 34.629175,
    longitude: 135.062928,
  },
  {
    name: '舞子駅',
    kana: 'まいこ',
    area: '須磨',
    latitude: 34.633483,
    longitude: 135.033772,
  },
  {
    name: '舞子公園駅',
    kana: 'まいここうえん',
    area: '須磨',
    latitude: 34.634108,
    longitude: 135.034303,
  },
  {
    name: '西舞子駅',
    kana: 'にしまいこ',
    area: '須磨',
    latitude: 34.638489,
    longitude: 135.028283,
  },
  {
    name: '霞ケ丘駅',
    kana: 'かすみがおか',
    area: '須磨',
    latitude: 34.630831,
    longitude: 135.042344,
  },
  {
    name: '鷹取駅',
    kana: 'たかとり',
    area: '須磨',
    latitude: 34.651339,
    longitude: 135.135203,
  },
  {
    name: '藍那駅',
    kana: 'あいな',
    area: '北区(田舎)',
    latitude: 34.732453,
    longitude: 135.117981,
  },
  {
    name: '有馬温泉駅',
    kana: 'ありまおんせん',
    area: '北区(田舎)',
    latitude: 34.799322,
    longitude: 135.245969,
  },
  {
    name: '有馬口駅',
    kana: 'ありまぐち',
    area: '北区(田舎)',
    latitude: 34.796742,
    longitude: 135.22095,
  },
  {
    name: '大池駅',
    kana: 'おおいけ',
    area: '北区(田舎)',
    latitude: 34.780686,
    longitude: 135.198386,
  },
  {
    name: '岡場駅',
    kana: 'おかば',
    area: '北区(田舎)',
    latitude: 34.821517,
    longitude: 135.222383,
  },
  {
    name: '唐櫃台駅',
    kana: 'からとだい',
    area: '北区(田舎)',
    latitude: 34.790661,
    longitude: 135.211697,
  },
  {
    name: '北鈴蘭台駅',
    kana: 'きたすずらんだい',
    area: '北区(田舎)',
    latitude: 34.739467,
    longitude: 135.152028,
  },
  {
    name: '木幡駅',
    kana: 'こばた',
    area: '北区(田舎)',
    latitude: 34.748419,
    longitude: 135.071047,
  },
  {
    name: '五社駅',
    kana: 'ごしゃ',
    area: '北区(田舎)',
    latitude: 34.806097,
    longitude: 135.216225,
  },
  {
    name: '神鉄道場駅',
    kana: 'しんてつどうじょう',
    area: '北区(田舎)',
    latitude: 34.866647,
    longitude: 135.226103,
  },
  {
    name: '鈴蘭台駅',
    kana: 'すずらんだい',
    area: '北区(田舎)',
    latitude: 34.723661,
    longitude: 135.146058,
  },
  {
    name: '鈴蘭台西口駅',
    kana: 'すずらんだいにしぐち',
    area: '北区(田舎)',
    latitude: 34.726422,
    longitude: 135.140711,
  },
  {
    name: '田尾寺駅',
    kana: 'たおじ',
    area: '北区(田舎)',
    latitude: 34.835469,
    longitude: 135.225994,
  },
  {
    name: '谷上駅',
    kana: 'たにがみ',
    area: '北区(田舎)',
    latitude: 34.761831,
    longitude: 135.171344,
  },
  {
    name: '道場駅',
    kana: 'どうじょう',
    area: '北区(田舎)',
    latitude: 34.867228,
    longitude: 135.255628,
  },
  {
    name: '道場南口駅',
    kana: 'どうじょうみなみぐち',
    area: '北区(田舎)',
    latitude: 34.856275,
    longitude: 135.223008,
  },
  {
    name: '西鈴蘭台駅',
    kana: 'にしすずらんだい',
    area: '北区(田舎)',
    latitude: 34.725694,
    longitude: 135.135394,
  },
  {
    name: '二郎駅',
    kana: 'にろう',
    area: '北区(田舎)',
    latitude: 34.848992,
    longitude: 135.226958,
  },
  {
    name: '箕谷駅',
    kana: 'みのたに',
    area: '北区(田舎)',
    latitude: 34.756911,
    longitude: 135.155767,
  },
  {
    name: '山の街駅',
    kana: 'やまのまち',
    area: '北区(田舎)',
    latitude: 34.74665,
    longitude: 135.152914,
  },
  {
    name: '花山駅',
    kana: 'はなやま',
    area: '北区(田舎)',
    latitude: 34.769533,
    longitude: 135.186878,
  },
  {
    name: '鵯越駅',
    kana: 'ひよどりごえ',
    area: '北区(田舎)',
    latitude: 34.692639,
    longitude: 135.142128,
  },
  {
    name: '神鉄六甲駅',
    kana: 'しんてつろっこう',
    area: '北区(田舎)',
    latitude: 34.785553,
    longitude: 135.206639,
  },
  {
    name: '伊川谷駅',
    kana: 'いかわだに',
    area: '西神(西区)',
    latitude: 34.687886,
    longitude: 135.041364,
  },
  {
    name: '学園都市駅',
    kana: 'がくえんとし',
    area: '西神(西区)',
    latitude: 34.681494,
    longitude: 135.057486,
  },
  {
    name: '押部谷駅',
    kana: 'おしべだに',
    area: '西神(西区)',
    latitude: 34.756606,
    longitude: 135.039183,
  },
  {
    name: '木津駅',
    kana: 'きづ',
    area: '西神(西区)',
    latitude: 34.744178,
    longitude: 135.0882,
  },
  {
    name: '栄駅',
    kana: 'さかえ',
    area: '西神(西区)',
    latitude: 34.755206,
    longitude: 135.056639,
  },
  {
    name: '西神中央駅',
    kana: 'せいしんちゅうおう',
    area: '西神(西区)',
    latitude: 34.719469,
    longitude: 135.017447,
  },
  {
    name: '西神南駅',
    kana: 'せいしんみなみ',
    area: '西神(西区)',
    latitude: 34.699405,
    longitude: 135.030183,
  },
  {
    name: '総合運動公園駅',
    kana: 'そうごううんどうこうえん',
    area: '西神(西区)',
    latitude: 34.681703,
    longitude: 135.075783,
  },
  {
    name: '名谷駅',
    kana: 'みょうだに',
    area: '西神(西区)',
    latitude: 34.679328,
    longitude: 135.094211,
  },
  {
    name: '妙法寺駅',
    kana: 'みょうほうじ',
    area: '西神(西区)',
    latitude: 34.675044,
    longitude: 135.110119,
  },
];

export const AREA_OPTIONS = (() => {
  const options: string[] = [];
  for (const station of STATION_AREAS) {
    if (!options.includes(station.area)) {
      options.push(station.area);
    }
  }
  return options;
})();

const EARTH_RADIUS_KM = 6371;

const degreesToRadians = (degrees: number) => (degrees * Math.PI) / 180;

const getDistanceKm = (lat1: number, lon1: number, lat2: number, lon2: number) => {
  const dLat = degreesToRadians(lat2 - lat1);
  const dLon = degreesToRadians(lon2 - lon1);
  const a =
    Math.sin(dLat / 2) ** 2 +
    Math.cos(degreesToRadians(lat1)) * Math.cos(degreesToRadians(lat2)) * Math.sin(dLon / 2) ** 2;
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return EARTH_RADIUS_KM * c;
};

export function getAreaForCoordinates(
  latitude?: number | null,
  longitude?: number | null
): string | undefined {
  if (latitude == null || longitude == null) return undefined;
  let closestArea: string | undefined;
  let minDistance = Number.POSITIVE_INFINITY;

  for (const station of STATION_AREAS) {
    const distance = getDistanceKm(latitude, longitude, station.latitude, station.longitude);
    if (distance < minDistance) {
      minDistance = distance;
      closestArea = station.area;
    }
  }

  return closestArea;
}
